<!-- This partial is returned after updating room status -->
<!-- It triggers a reload of the room panel to show updated status -->
<script>
    // Reload the room panel to show updated status
    htmx.ajax('GET', '{% url "room_panel" snapshot.room.id %}', {target: '#room-drawer-content', swap: 'innerHTML'});
    
    // Also update the room card in the grid if visible
    const roomCard = document.getElementById('room-card-{{ snapshot.room.id }}');
    if (roomCard) {
        // Find the badge element and update it
        const badge = roomCard.querySelector('.badge, [class*="badge"]');
        if (badge) {
            badge.className = 'px-3 py-1 text-xs font-semibold rounded-full {{ snapshot.badge_class }} min-h-[28px] flex items-center';
            badge.textContent = '{{ snapshot.badge }}';
        }
        
        // Update status pill
        const statusPill = roomCard.querySelector('[class*="bg-blue-100"], [class*="bg-gray-100"], [class*="bg-yellow-100"]');
        if (statusPill) {
            {% if snapshot.room.status == 'occupied' %}
                statusPill.className = 'inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800';
                statusPill.textContent = 'Occupied';
            {% elif snapshot.room.status == 'vacant' %}
                statusPill.className = 'inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700';
                statusPill.textContent = 'Vacant';
            {% else %}
                statusPill.className = 'inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800';
                statusPill.textContent = 'Maintenance';
            {% endif %}
        }
    }
</script>

